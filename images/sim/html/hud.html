<html>
<meta charset="UTF-8">
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/7.3.0/rxjs.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="./api.js"></script>
  <style>
    body {
      font-family:Arial, Helvetica, sans-serif;
    }
    #map {
      height: 100%;
      width: 100%;
    }
    div {
      position: absolute
    }
    </style>
</head>

<body>

<div id="map">
    <script>
      var map;
      var marker;

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -33.722, lng: 150.67398},
          zoom: 18,
          disableDefaultUI: true,
          scaleControl: true,
          zoomControl: true,
          mapTypeId: "satellite",
        });
        marker = new google.maps.Marker({
          position: {lat: -33.722, lng:150.67398},
          icon: icon(0),
          map,
          title: "craft",
        });
      }
      sinks["/wamv/sensors/gps/gps/fix"] = (msg) => {
        latlng = {lat: msg.msg.latitude, lng: msg.msg.longitude}
        marker.setPosition(latlng);
      }
      sinks["/wamv/sensors/imu/imu/data"] = (msg) => {
        marker.setIcon(icon(imuMsgToHeading(msg)))
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDH2csoEoU0MN1xUvPrHK1MY2Gt4MfCFC8&callback=initMap"
    async defer></script>
</div>
<svg id="hud" width = 100% height=100%></svg>


</body>

</html>